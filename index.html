<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://i.postimg.cc/tghfjHJm/Favicon.png">
    <title>Addly</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* [NUEVO] Scroll suave */
        html {
            scroll-behavior: smooth;
        }
        .section-container {
            display: none;
        }
        .section-container.active {
            display: block;
        }
        /* Style for disabled buttons */
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        /* Style for invalid fields */
        .invalid-field {
            border-color: #ef4444; /* red-500 */
            --tw-ring-color: #ef4444;
        }
        .highlight-finish-btn {
            animation: glow 2.5s ease-in-out;
        }
        @keyframes glow {
            0% { box-shadow: 0 0 0px #60a5fa; } /* blue-400 */
            50% { box-shadow: 0 0 25px 8px #60a5fa; }
            100% { box-shadow: 0 0 0px #60a5fa; }
        }
        /* Custom toggle switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #2563eb; /* blue-600 */
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #2563eb; /* blue-600 */
        }
        /* Pop-up Modal Styles */
        #success-modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        #success-modal-box {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        
        /* [CRO] Timeline Styles - MODIFICADO */
        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
            text-align: center; /* Centrado para móvil */
            padding-left: 1rem; 
            padding-right: 1rem;
        }
        .timeline-item:before {
            content: '';
            position: absolute;
            left: 50%; /* Centrado */
            transform: translateX(-50%); /* Centrado */
            top: 3rem; /* Ajustado debajo del dot */
            bottom: -0.5rem;
            width: 2px;
            background-color: #d1d5db; /* gray-300 */
        }
        .timeline-item:last-child:before {
            display: none; /* No line after the last item */
        }
        .timeline-dot {
            position: relative; /* Cambiado de absolute */
            left: auto;
            top: auto;
            width: 2rem; /* Más grande para móvil */
            height: 2rem; /* Más grande para móvil */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background-color: #2563eb; /* blue-600 */
            color: white;
            font-weight: bold;
            font-size: 1rem; /* Más grande para móvil */
            margin-left: auto; /* Centrado */
            margin-right: auto; /* Centrado */
            margin-bottom: 1rem; /* Espacio antes del texto */
        }
        @media (min-width: 768px) {
            .timeline-container {
                position: relative;
                width: 100%;
                display: flex;
                justify-content: space-between;
                margin-top: 2rem;
            }
            .timeline-container:before {
                content: '';
                position: absolute;
                top: 0.6rem;
                left: 5%;
                right: 5%;
                height: 2px;
                background-color: #d1d5db; /* gray-300 */
                z-index: 0;
            }
            .timeline-item {
                position: relative;
                width: 30%;
                padding-left: 0;
                padding-right: 0; /* Reseteado */
                padding-top: 3.5rem;
                padding-bottom: 0;
                text-align: center;
            }
            .timeline-item:before {
                 display: none; /* Remove vertical lines */
            }
             .timeline-dot {
                position: absolute; /* Reseteado para desktop */
                left: 50%;
                top: 0;
                transform: translateX(-50%);
                z-index: 1;
                width: 1.5rem; /* Reseteado para desktop */
                height: 1.5rem; /* Reseteado para desktop */
                margin-bottom: 0; /* Reseteado */
                font-size: 0.875rem; /* Reseteado */
            }
        }
        
        /* [CRO] Activity Feed - MODIFICADO */
        #activity-feed {
            font-size: 1.125rem; /* text-lg (Aumentado de 1rem) */
            color: #d1d5db; /* gray-300 */
        }
        #activity-feed span {
            display: inline-block;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* [CRO] Marquee for Logos/Gallery - MODIFICADO PARA SCROLL/SWIPE + ANIMACIÓN */
        .marquee-wrapper {
            overflow-x: auto; /* Habilita scroll horizontal */
            position: relative;
            width: 100%;
            -webkit-overflow-scrolling: touch; /* Scroll suave en iOS */
            scrollbar-width: none; /* Oculta scrollbar en Firefox */
        }
        .marquee-wrapper::-webkit-scrollbar {
            display: none; /* Oculta scrollbar en Chrome/Safari */
        }

        .marquee-content {
            display: flex;
            width: max-content;
            /* Velocidad base (móvil) */
            animation: marquee 20s linear infinite;
        }
        
        /* Pausa la animación al interactuar */
        .marquee-wrapper:hover .marquee-content,
        .marquee-wrapper:focus-within .marquee-content {
            animation-play-state: paused;
        }
        
        /* Ajusta velocidad en desktop */
        @media (min-width: 768px) {
            .marquee-content {
                /* Velocidad más lenta en desktop */
                animation-duration: 30s;
            }
        }
        
        .marquee-content img {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            flex-shrink: 0;
        }
         .marquee-gallery img {
            max-width: 400px;
            height: auto;
        }
        
        @keyframes marquee {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-50%); }
        }
    </style>
</head>
<body class="bg-white">

    <!-- [CRO] Modal de Éxito (Sin cambios) -->
    <div id="success-modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden opacity-0">
        <div id="success-modal-box" class="bg-white rounded-2xl shadow-xl p-8 max-w-sm w-full text-center transform scale-95 opacity-0">
            <div class="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-100 mb-4">
                <svg class="h-12 w-12 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            </div>
            <h3 id="modal-title" class="text-2xl font-bold text-gray-800 mb-2">¡Éxito!</h3>
            <p id="modal-message" class="text-gray-600 mb-6">La operación se completó correctamente.</p>
            <button id="modal-close-btn" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300">
                Entendido
            </button>
        </div>
    </div>

    <!-- [CRO] CTA Flotante (Sticky) para Móvil -->
    <div id="floating-cta-mobile" class="md:hidden fixed bottom-0 left-0 right-0 bg-white p-4 z-40 border-t border-gray-200 shadow-lg">
        <a href="#cotizador" class="w-full bg-yellow-400 text-gray-900 font-bold py-3 px-4 text-sm rounded-lg hover:bg-yellow-500 transition-colors block text-center">
            LANZA TU CAMPAÑA AHORA
        </a>
    </div>
    
    <!-- [NUEVO] CTA Flotante (Sticky) para Desktop -->
    <div id="floating-cta-desktop" class="hidden md:block fixed bottom-8 right-8 z-40 transform transition-transform duration-300 hover:scale-105">
        <a href="#cotizador" class="bg-yellow-400 text-gray-900 font-bold py-4 px-8 text-lg rounded-lg hover:bg-yellow-500 transition-colors shadow-2xl">
            LANZA TU CAMPAÑA AHORA
        </a>
    </div>

    <div id="initial-view">
        <!-- [CRO] Navegación Rediseñada -->
        <header class="bg-white shadow-md sticky top-0 z-40">
            <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
                <div>
                     <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly" class="h-12">
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <!-- Botón Secundario de Alto Contraste -->
                    <a href="#" id="register-driver-nav" class="text-white bg-green-500 hover:bg-green-600 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-colors">
                        Gana Dinero Conduciendo
                    </a>
                    
                    <!-- Botón Primario (Dropdown) -->
                    <button id="dropdown-register-button" data-dropdown-toggle="dropdown-register" class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center" type="button">
                        Socios
                        <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                        </svg>
                    </button>
                    
                    <div id="dropdown-register" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44">
                        <ul class="py-2 text-sm text-gray-700" aria-labelledby="dropdown-register-button">
                          <li>
                            <a href="#" id="register-graph-nav" class="block px-4 py-2 hover:bg-gray-100">Taller Gráfico</a>
                          </li>
                          <li>
                            <a href="#cotizador" class="block px-4 py-2 hover:bg-gray-100">Publicitar mi marca (Gratis)</a>
                          </li>
                        </ul>
                    </div>
                </div>
                 <button id="mobile-menu-button" class="md:hidden flex items-center">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </nav>
            
            <!-- Menú Móvil (IDs preservados) -->
            <div id="mobile-menu" class="md:hidden hidden px-6 pt-2 pb-4 space-y-2 border-t">
                <a href="#" id="register-driver-nav-mobile" class="block text-green-600 font-bold hover:bg-green-50 p-2 rounded-lg">Gana Dinero Conduciendo</a>
                <a href="#" id="register-graph-nav-mobile" class="block text-gray-800 font-medium hover:bg-gray-100 p-2 rounded-lg">Registrarse como Taller</a>
                <a href="#cotizador" class="block text-gray-800 font-medium hover:bg-gray-100 p-2 rounded-lg">Cotiza tu Campaña</a>
            </div>
        </header>

        <main>
            
            <!-- [CRO] SECCIÓN 1: HERO OPTIMIZADO - MODIFICADO -->
            <section class="relative h-screen flex items-center justify-center">
                
                <!-- Fondo de Carrusel (Reemplaza la imagen estática) -->
                <div class="absolute inset-0 w-full h-full z-0" data-carousel="slide" data-carousel-interval="3000">
                    <div class="relative h-full overflow-hidden">
                        <!-- Item 1 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/wBC7QySr/1.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 1">
                        </div>
                        <!-- Item 2 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/PqgPQpBc/2.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 2">
                        </div>
                        <!-- Item 3 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/bJ1dCYh3/3.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 3">
                        </div>
                        <!-- Item 4 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/SscjTQhV/4.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 4">
                        </div>
                         <!-- Item 5 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/R0kNL6jw/5.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 5">
                        </div>
                         <!-- Item 6 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/BvrXBLdw/6.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 6">
                        </div>
                         <!-- Item 7 -->
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <img src="https://i.postimg.cc/SKBJf2w3/7.jpg" class="absolute block w-full h-full object-cover" alt="Carrusel 7">
                        </div>
                    </div>
                </div>
                
                <div class="absolute inset-0 bg-black bg-opacity-60 z-10"></div>

                <!-- Contenido del Hero (Sin cambios) -->
                <div class="relative container mx-auto px-6 text-center text-white z-20">
                    <!-- H1 Dinámico y Contador -->
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">¡ALCANCE GARANTIZADO!</h1>
                    <p class="mt-4 text-2xl md:text-4xl font-light max-w-3xl mx-auto">TU MARCA VISTA POR MÁS DE <span class="font-bold text-yellow-400">1.000.000</span> DE PERSONAS AL MES.</p>
                    
                    <!-- [CRO] Contador Animado -->
                    <div class="mt-6 text-center">
                        <span class="text-lg md:text-xl text-gray-300">Impactos generados hoy:</span>
                        <div id="impact-counter" class="text-4xl md:text-5xl font-bold text-white mt-2">0</div>
                    </div>

                    <!-- [CRO] Flecha de 'Scroll' para indicar 'Corte Incompleto' - MODIFICADO -->
                    <!-- Ajustado: bottom-20 en móvil (para evitar el CTA flotante), bottom-2 en desktop -->
                    <a href="#" id="scroll-arrow" class="absolute bottom-20 md:bottom-2 left-1/2 -translate-x-1/2 z-20 text-white cursor-pointer">
                        <svg class="w-8 h-8 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7"></path></svg>
                    </a>
            </section>
            
            <!-- [CRO] SECCIÓN 2: SOCIOS DE MARCA (PRUEBA SOCIAL) - MODIFICADO -->
            <section id="marcas" class="py-10 bg-gray-900 relative z-30 -mt-24 rounded-t-2xl"> <!-- Padding reducido de py-12 a py-10 -->
                 <div class="container mx-auto px-6 text-center">
                    <h2 class="text-xl font-semibold text-gray-300 mb-8">Marcas que confían en nosotros para rodar su mensaje</h2>
                    <!-- [UX/CRO] Carrusel con animación y swipe -->
                    <div class="marquee-wrapper">
                        <div class="marquee-content">
                            <!-- Logos -->
                            <img src="https://i.postimg.cc/NjVGBKD9/Secci-n-Socios-de-marca-20251015-193216-0000.jpg" alt="Socio 1" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/rwzyB11r/Secci-n-Socios-de-marca-20251015-193216-0001.jpg" alt="Socio 2" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/wj3xCXXR/Secci-n-Socios-de-marca-20251015-193217-0002.jpg" alt="Socio 3" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/YCj2566G/Secci-n-Socios-de-marca-20251015-193217-0003.jpg" alt="Socio 4" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/4N9PP0xJ/5.jpg" alt="Socio 5" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/65vccPpp/6.jpg" alt="Socio 6" class="h-10 mx-auto transition-all">
                            <!-- Duplicados para loop infinito -->
                            <img src="https://i.postimg.cc/NjVGBKD9/Secci-n-Socios-de-marca-20251015-193216-0000.jpg" alt="Socio 1" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/rwzyB11r/Secci-n-Socios-de-marca-20251015-193216-0001.jpg" alt="Socio 2" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/wj3xCXXR/Secci-n-Socios-de-marca-20251015-193217-0002.jpg" alt="Socio 3" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/YCj2566G/Secci-n-Socios-de-marca-20251015-193217-0003.jpg" alt="Socio 4" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/4N9PP0xJ/5.jpg" alt="Socio 5" class="h-10 mx-auto transition-all">
                            <img src="https://i.postimg.cc/65vccPpp/6.jpg" alt="Socio 6" class="h-10 mx-auto transition-all">
                        </div>
                    </div>
                 </div>
            </section>
            
            <!-- [CRO] SECCIÓN 3: NUESTROS 3 PILARES (PROPUESTA DE VALOR) -->
            <section class="py-16 bg-white"> <!-- Padding reducido de py-20 a py-16 -->
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">¿Cansado de vallas publicitarias que nadie puede medir?</h2>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-12">Rompemos con la publicidad tradicional. Te damos control total, logística sin esfuerzo y verificación en tiempo real.</p> <!-- Margen reducido de mb-16 a mb-12 -->
                    <div class="grid md:grid-cols-3 gap-12">
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mx-auto mb-4">
                                <!-- Icono: Mapa -->
                                <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m0 0v2.25m0-2.25h1.5M9 15h1.5m-1.5 0H5.625c-.621 0-1.125.504-1.125 1.125v2.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V16.125c0-.621-.504-1.125-1.125-1.125h-1.5M12 9v6.75m0 0h-1.5M12 9h1.5m0 0H9m1.5 0H12m0 0V6.75m0 0h.008v.008H12V6.75zm.008 0H12m0 0h.008v.008H12V6.75zm.008 0h.008v.008h-.008V6.75zm.008 0h.008v.008h-.008V6.75zm-.008 0H12v.008h.008V6.75zM12 9h.008v.008H12V9zm.008 0h.008v.008h-.008V9zm.008 0h.008v.008h-.008V9zm-.008 0H12v.008h.008V9z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-2">Alcance Medible</h3>
                            <p class="font-semibold text-gray-700 mb-2">Diseña tu Ruta y Cobertura</p>
                            <p class="text-gray-600">No más adivinanzas. Selecciona tus Zonas de Interés y mide cada impacto. Nosotros asignamos la flota ideal para tu objetivo.</p>
                        </div>
                        <div class="text-center">
                             <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mx-auto mb-4">
                                <!-- Icono: Manos Libres -->
                                <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                                </svg>
                             </div>
                            <h3 class="text-xl font-semibold mb-2">Logística Sin Esfuerzo</h3>
                            <p class="font-semibold text-gray-700 mb-2">Producción y Montaje Incluido</p>
                            <p class="text-gray-600">Nuestro equipo de socios gráficos se encarga de la fabricación y la aplicación profesional. Tu publicidad se instala rápido y con calidad garantizada.</p>
                        </div>
                        <div class="text-center">
                             <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mx-auto mb-4">
                                <!-- Icono: Verificación -->
                                <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
                                </svg>
                             </div>
                            <h3 class="text-xl font-semibold mb-2">Verificación Constante</h3>
                             <p class="font-semibold text-gray-700 mb-2">Resultados en Vivo y Sin Sorpresas</p>
                            <p class="text-gray-600">Accede a reportes detallados y fotos de verificación. Te garantizamos que tu mensaje sigue en la calle, generando impacto real cada día.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- [CRO] SECCIÓN 4: ELIMINACIÓN DE FRICCIÓN (CALCULADORA DE IMPACTO) - MODIFICADO -->
            <section class="py-20 bg-gray-50">
                <div class="container mx-auto px-6">
                    <div class="max-w-2xl mx-auto">
                        <!-- Columna 1: Calculadora -->
                        <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-200">
                            <div class="text-center md:text-left mb-6">
                                <h2 class="text-3xl font-bold text-gray-800 mb-4">Simula tu Impacto al Instante</h2>
                                <p class="text-lg text-gray-600">Descubre el alcance potencial de tu marca.</p>
                            </div>
                            <!-- Grid interno modificado a 1 columna -->
                            <div class="grid grid-cols-1 gap-6">
                                <div>
                                    <label for="calc-vehicle" class="block text-gray-600 font-medium mb-2">Vehículo</label>
                                    <select id="calc-vehicle" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                                        <option value="1.0">Auto/Camioneta</option>
                                        <option value="0.5">Moto</option>
                                        <option value="0.3">Bici</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="calc-months" class="block text-gray-600 font-medium mb-2">Meses de Campaña</label>
                                    <select id="calc-months" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                                        <option value="1" selected>1 Mes</option>
                                        <option value="2">2 Meses</option>
                                        <option value="3">3 Meses</option>
                                        <option value="4">4 Meses</option>
                                        <option value="5">5 Meses</option>
                                        <option value="6">6 Meses</option>
                                        <option value="9">9 Meses</option>
                                        <option value="12">12 Meses (1 Año)</option>
                                        <option value="18">18 Meses</option>
                                        <option value="24">24 Meses (2 Años)</option>
                                    </select>
                                </div>
                                <!-- [MODIFICADO] Reemplazado 'Ciudad Principal' por 'Provincia' y 'Ciudad' -->
                                <div>
                                    <label for="calc-province" class="block text-gray-600 font-medium mb-2">Provincia</label>
                                    <select id="calc-province" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                                        <option value="">Seleccione una provincia</option>
                                        <!-- Opciones cargadas por JS -->
                                    </select>
                                </div>
                                <div>
                                    <label for="calc-city" class="block text-gray-600 font-medium mb-2">Ciudad</label>
                                    <select id="calc-city" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                        <option value="">Seleccione una provincia primero</option>
                                    </select>
                                </div>
                            </div>
                            <button id="calc-submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300 mt-6">
                                Calcular Impacto Estimado
                            </button>
                            <div id="calc-result" class="hidden text-center mt-6 p-6 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                                <p class="text-lg text-gray-700">Tu inversión hara que un estimado de:</p>
                                <p id="calc-result-number" class="text-5xl font-extrabold text-blue-600 my-2">0</p>
                                <p id="calc-result-city" class="text-lg text-gray-700">Personas vean tu marca en Córdoba ( por semana )</p>
                            </div>
                        </div>
                        
                        <!-- Columna 2: Explicación (MODIFICADO para Acordeón) ELIMINADA -->
                    </div>
                </div>
            </section>
            
            <!-- [CRO] SECCIÓN 5: TIMELINE (CÓMO FUNCIONA) - MODIFICADO (CSS) -->
            <section class="py-20 bg-white">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl font-bold text-gray-800 mb-12">Tu Campaña en 3 Pasos Simples</h2>
                    <div class="timeline-container md:grid md:grid-cols-3 md:gap-12">
                        <!-- Paso 1 -->
                        <div class="timeline-item">
                            <div class="timeline-dot">1</div>
                            <h3 class="text-xl font-semibold mb-2">Diseña tu Alcance</h3>
                            <p class="text-gray-600">Usa el cotizador para elegir superficie (cm²), zonas de interés y duración. Define tu impacto.</p>
                        </div>
                        <!-- Paso 2 -->
                        <div class="timeline-item">
                            <div class="timeline-dot">2</div>
                            <h3 class="text-xl font-semibold mb-2">Producción Rápida</h3>
                            <p class="text-gray-600">Aprobado el diseño, nuestra red de socios gráficos fabrica e instala tu publicidad en tiempo récord.</p>
                        </div>
                        <!-- Paso 3 -->
                        <div class="timeline-item">
                            <div class="timeline-dot">3</div>
                            <h3 class="text-xl font-semibold mb-2">Verificación en Vivo</h3>
                            <p class="text-gray-600">Accede a reportes y fotos de los vehículos en la calle. Mide tu impacto y ROI en tiempo real desde tu panel.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- [CRO] Activity Feed (Relocated) - MODIFICADO -->
            <section class="py-10 bg-gray-900"> <!-- Aumentado de py-8 a py-10 -->
                <div class="container mx-auto px-6">
                    <div id="activity-feed" class="h-6 text-center"></div>
                </div>
            </section>
            
            <!-- [CRO] SECCIÓN 6: OPORTUNIDADES DUALES (SPLIT SCREEN) - MODIFICADO -->
            <section class="grid grid-cols-1"> <!-- CLASE 'lg:grid-cols-2' ELIMINADA -->
                
                <!-- [MODIFICADO] Lado A: Conductores (Ahora con estilo Gráficas) -->
                <div id="flota" class="bg-blue-800 text-white py-20">
                    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                        <!-- Texto/Form (Movido primero para orden en móvil) -->
                        <div class="w-full text-center md:text-left md:order-1">
                             <!-- [NUEVO] Wrapper para centrar y limitar ancho en móvil -->
                            <div class="max-w-md mx-auto md:max-w-none md:mx-0">
                                <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly" class="h-12 mx-auto mb-6 md:hidden filter brightness-0 invert"> <!-- [MODIFICADO] Logo para Móvil (Invertido) -->
                                <h2 class="text-3xl md:text-4xl font-extrabold text-white mb-4">GANA DINERO CONDUCIENDO</h2> <!-- [MODIFICADO] text-white -->
                                <p class="text-blue-100 text-lg mb-8">Convierte tu auto, moto o bici en una fuente de ingresos extra. Sin esfuerzo, sin desvíos.</p> <!-- [MODIFICADO] text-blue-100 -->
                                
                                <!-- [CRO] Micro-Formulario (Visual) -->
                                <div class="space-y-4 mb-6">
                                    <select id="driver-micro-vehicle" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-gray-900" required> <!-- [MODIFICADO] text-gray-900 -->
                                        <option value="">¿Qué vehículo tienes?</option>
                                        <option value="AUTO/CAMIONETA">AUTO/CAMIONETA</option>
                                        <option value="MOTO">MOTO</option>
                                        <option value="BICI">BICI</option>
                                    </select>
                                    <input id="driver-micro-email" type="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-gray-900" placeholder="Tu correo electrónico" required> <!-- [MODIFICADO] text-gray-900 -->
                                </div>
                                
                                <!-- [MODIFICADO] Grupo de botones -->
                                <div class="flex flex-col sm:flex-row gap-4">
                                    <!-- [MODIFICADO] Botón 1 con estilo de "Gráficas" -->
                                    <button id="show-drivers-cta" class="w-full sm:flex-1 bg-white text-blue-800 font-bold py-4 px-10 rounded-lg text-lg hover:bg-gray-100 transition-colors transform hover:scale-105">
                                        Únete a la Flota
                                    </button>
                                    <!-- [MODIFICADO] Botón 2 con estilo de "Conductores" (verde) -->
                                    <button id="save-driver-lead-cta" class="w-full sm:flex-1 bg-green-500 text-white font-bold py-4 px-10 rounded-lg text-lg hover:bg-green-600 transition-colors transform hover:scale-105 hidden">
                                        Enviar
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Imagen (Movida segunda para orden en móvil) -->
                        <div class="md:order-2">
                            <img src="https://i.postimg.cc/L8h4cttk/Secci-n-GRAFICA-CONDUCTOR-20251015-193256-0001.jpg" class="rounded-lg shadow-xl max-w-md mx-auto" alt="Conductor con su auto ploteado">
                        </div>
                    </div>
                </div>

                <!-- [MODIFICADO] Lado B: Gráficas (Ahora con estilo Conductores) -->
                <div id="graficas" class="bg-gray-50 py-20">
                    <div class="container mx-auto px-6 grid md:grid-cols-2 gap-12 items-center">
                         <!-- Texto/Form (Movido primero para orden en móvil) -->
                        <div class="w-full text-center md:text-left">
                            <!-- [NUEVO] Wrapper para centrar y limitar ancho en móvil -->
                            <div class="max-w-md mx-auto md:max-w-none md:mx-0">
                                <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly" class="h-12 mx-auto mb-6 md:hidden"> <!-- [MODIFICADO] Logo para Móvil (Sin filtro) -->
                                <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">SOCIO GRÁFICO: FLUJO DE TRABAJO CONSTANTE</h2> <!-- [MODIFICADO] text-gray-900 -->
                                <p class="text-gray-600 text-lg mb-8">Asegura un volumen de rotulaciones predecible y rápido. Únete a la red de talleres que crece con Addly.</p> <!-- [MODIFICADO] text-gray-600 -->
                                <!-- [MODIFICADO] Botón con estilo de "Conductores" -->
                                <button id="show-graphs-cta" class="w-full bg-green-500 text-white font-bold py-4 px-10 rounded-lg text-lg hover:bg-green-600 transition-colors transform hover:scale-105">
                                    Registra tu Taller
                                </button>
                            </div>
                        </div>
                        <!-- Imagen (Movida segunda para orden en móvil) -->
                         <div class="w-full">
                            <img src="https://i.postimg.cc/Z50YG88b/Secci-n-GRAFICA-CONDUCTOR-20251015-193256-0000.jpg" class="rounded-lg shadow-xl max-w-md mx-auto" alt="Instalador aplicando vinilo">
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- [NUEVO] SECCIÓN 7: GALERÍA (PRUEBA SOCIAL) - MODIFICADO -->
            <section class="py-20 bg-gray-50">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Campañas en acción</h2>
                    <div class="marquee-wrapper">
                        <div class="marquee-content marquee-gallery">
                            <!-- Imágenes Originales -->
                            <img src="https://i.postimg.cc/8z3kN74r/Galer-a-Campa-as-en-acci-n-20251015-193152-0000.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 1">
                            <img src="https://i.postimg.cc/K8Vcx1fM/Galer-a-Campa-as-en-acci-n-20251015-193152-0001.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 2">
                            <img src="https://i.postimg.cc/DwDfnS6G/Galer-a-Campa-as-en-acci-n-20251015-193152-0002.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 3">
                            <!-- Imágenes Duplicadas para Loop -->
                            <img src="https://i.postimg.cc/8z3kN74r/Galer-a-Campa-as-en-acci-n-20251015-193152-0000.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 1">
                            <img src="https://i.postimg.cc/K8Vcx1fM/Galer-a-Campa-as-en-acci-n-20251015-193152-0001.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 2">
                            <img src="https://i.postimg.cc/DwDfnS6G/Galer-a-Campa-as-en-acci-n-20251015-193152-0002.jpg" class="rounded-lg shadow-md aspect-video object-cover" alt="Campaña 3">
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- [CRO] SECCIÓN 8: CTA A PÁGINA DE CLIENTES (COTIZADOR) - CORREGIDO -->
            <section id="cotizador" class="py-20 bg-blue-700 text-white">
                 <div class="container mx-auto px-6 text-center">
                    <h2 class="text-3xl font-bold mb-4">¿Listo para que tu marca llegue lejos?</h2>
                    <p class="max-w-2xl mx-auto mb-8">Descubre el impacto de la publicidad móvil. Obtén una cotización personalizada para tu próxima campaña.</p>
                    <a href="#clientes" class="bg-yellow-400 text-gray-900 font-bold py-3 px-8 rounded-lg text-lg hover:bg-yellow-500 transition-colors">Cotiza tu campaña ahora</a>
                 </div>
            </section>
            
        </main>

        <footer class="bg-blue-800 text-white">
            <div class="container mx-auto px-6 py-12">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- [MODIFICADO] Añadido text-center md:text-left -->
                    <div class="text-center md:text-left">
                        <h3 class="font-bold mb-4">Enlaces Rápidos</h3>
                        <ul>
                            <li class="mb-2"><a href="#" id="footer-register-driver" class="hover:underline">Conviértete en conductor</a></li>
                             <li><a href="#" id="footer-register-graph" class="hover:underline">Quiero asociar mi grafica</a></li>
                             <li class="mb-2"><a href="#cotizador" class="hover:underline">Cotizar mi Campaña</a></li>
                        </ul>
                    </div>
                    <!-- [MODIFICADO] Añadido flex flex-col items-center md:items-end -->
                    <div class="flex flex-col items-center md:items-end md:justify-self-end md:col-start-3">
                         <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly Blanco" class="h-16 mb-4 filter brightness-0 invert">
                        <div class="flex space-x-4">
                            <a href="https://www.instagram.com/addlyoficial?igsh=M3R5dW1lOWlqZzlo" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011 3.584.069 4.85c.149-3.225 1.664 4.771 4.919 4.919 1.266.058 1.644.07 4.85.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.058-1.689-.072-4.948-.072zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.441 1.441 1.441 1.441-.645 1.441-1.441-.645-1.44-1.441-1.44z"/></svg></a>
                            <a href="https://wa.me/message/B4B2BFKSPAUBI1" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.48 16.82L2.1 21.9L7.29 20.53C8.7 21.32 10.33 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 6.45 17.5 2 12.04 2ZM12.04 3.63C16.56 3.63 20.32 7.39 20.32 11.91C20.32 16.43 16.56 20.19 12.04 20.19C10.46 20.19 8.96 19.74 7.68 18.91L7.21 18.63L3.83 19.52L4.74 16.23L4.44 15.74C3.63 14.38 3.17 12.87 3.17 11.91C3.17 7.39 6.93 3.63 12.04 3.63ZM9.31 6.51C9.09 6.51 8.76 6.58 8.54 6.91C8.32 7.24 7.51 8.01 7.51 9.28C7.51 10.55 8.56 11.72 8.71 11.92C8.86 12.12 10.15 14.19 12.22 15.02C13.88 15.69 14.39 15.54 14.79 15.49C15.46 15.41 16.42 14.85 16.64 14.24C16.86 13.63 16.86 13.11 16.79 12.98C16.71 12.85 16.54 12.78 16.29 12.65C16.03 12.52 14.89 11.96 14.67 11.88C14.45 11.79 14.28 11.74 14.11 11.99C13.94 12.24 13.43 12.85 13.28 13.02C13.13 13.19 12.98 13.24 12.73 13.11C11.93 12.72 11.08 12.16 10.19 11.2C9.49 10.45 9.02 9.55 8.87 9.28C8.72 9.01 8.84 8.87 8.99 8.74C9.11 8.63 9.28 8.41 9.43 8.24C9.58 8.07 9.63 7.97 9.73 7.79C9.83 7.61 9.78 7.46 9.71 7.33C9.63 7.21 9.31 6.51 9.31 6.51Z"/></svg></a>
                        </div>
                    </div>
                </div>
                 <div class="mt-8 pt-8 border-t border-blue-700 text-center text-sm">
                    <!-- [CRO] Elite Strategy 3: Activity Feed (FOMO) - MOVED -->
                    <p>&copy; 2025 Gestión de Negocio. Todos los derechos reservados.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- [CRO] CONTENIDO DE LA APP (Formularios Ocultos) -->
    <!-- Esta sección se mantiene 100% intacta lógicamente -->
    <div id="app-content" class="hidden">
        <header class="bg-white shadow-md p-4 sticky top-0 z-50">
            <div class="container mx-auto flex justify-between items-center">
                <button id="back-to-home" class="text-gray-600 hover:text-gray-800 transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                </button>
                <h1 class="text-2xl font-bold text-gray-800">Gestión de Negocio</h1>
                <div class="w-6"></div> </div>
        </header>
    
        <main class="container mx-auto p-6 flex flex-col items-center justify-center flex-grow">
            <!-- Formulario de Conductores (Sin cambios de lógica) -->
            <section id="drivers-section" class="section-container w-full">
                 <div class="container mx-auto px-6 text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-12">Así de Fácil es Ganar Dinero Conduciendo</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">01</div>
                            <h3 class="text-xl font-semibold mb-2">Seguridad del Vehículo</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Es Seguro para mi Auto/Moto/Bici?</p>
                            <p class="text-gray-600">Absolutamente. Utilizamos vinilos y cartelería de alta calidad, seguros para la pintura y el material de tu vehículo. La instalación y el retiro son realizados exclusivamente por instaladores profesionales de nuestra red, sin dejar rastros.</p>
                        </div>
                        <div class="text-center">
                             <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">02</div>
                            <h3 class="text-xl font-semibold mb-2">El Trabajo (Esfuerzo Cero)</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Qué tengo que hacer?</p>
                            <p class="text-gray-600">Solo Conducir. Usas tu vehículo como siempre. Si hay una campaña disponible en tu zona, te lo notificamos. Aceptas la campaña, agendamos la instalación y empiezas a generar ingresos mientras circulas. Es un ingreso pasivo y sin esfuerzo.</p>
                        </div>
                        <div class="text-center">
                             <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">03</div>
                            <h3 class="text-xl font-semibold mb-2">Las Ganancias</h3>
                             <p class="font-semibold text-gray-700 mb-2">¿Cuánto gano y cómo me pagan?</p>
                            <p class="text-gray-600">Ganancias Mensuales Fijas. Recibirás tu pago completo al finalizar cada mes de campaña. Solo tienes to comply con las verificaciones semanales (una foto sencilla) para confirmar el buen estado de la publicidad.</p>
                        </div>
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">04</div>
                           <h3 class="text-xl font-semibold mb-2">Proceso y Soporte</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Cuál es el proceso de instalación y retiro?</p>
                           <p class="text-gray-600">Te notificamos la campaña y si aceptas, te enviamos la fecha, hora y dirección de nuestro instalador. Cuando la campaña termina, te contactamos con una semana de anticipación para coordinar el retiro gratuito del vinilo.</p>
                       </div>
                    </div>
                </div>
                <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly" class="mx-auto mb-6 h-32">
                <h2 class="text-4xl font-semibold text-gray-800 mb-8 text-center">¡Tu Vehículo es Dinero! Regístrate como Socio Chofer</h2>
                <div class="flex flex-wrap justify-center gap-8 max-w-4xl w-full mx-auto">
                    <div id="personal-data-container" class="bg-white p-10 rounded-2xl shadow-xl border border-gray-200 max-w-2xl w-full">
                        <h3 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-2">1. Tus Datos de Acceso Rápido</h3>
                        <form id="personal-data-form" novalidate>
                            <!-- Campos del formulario personal (sin cambios) -->
                            <div class="mb-5">
                                <label for="full-name" class="block text-gray-600 font-medium mb-2">Nombre y Apellido</label>
                                <input type="text" id="full-name" name="full-name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Juan Pérez" required>
                            </div>
                            <div class="mb-5">
                                <label for="province" class="block text-gray-600 font-medium mb-2">Provincia</label>
                                <select id="province" name="province" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                    <option value="">¿Dónde quieres empezar a ganar?</option>
                                    <option value="Buenos Aires">Buenos Aires</option>
                                    <option value="Catamarca">Catamarca</option>
                                    <option value="Chaco">Chaco</option>
                                    <option value="Chubut">Chubut</option>
                                    <option value="Córdoba">Córdoba</option>
                                    <option value="Corrientes">Corrientes</option>
                                    <option value="Entre Ríos">Entre Ríos</option>
                                    <option value="Formosa">Formosa</option>
                                    <option value="Jujuy">Jujuy</option>
                                    <option value="La Pampa">La Pampa</option>
                                    <option value="La Rioja">La Rioja</option>
                                    <option value="Mendoza">Mendoza</option>
                                    <option value="Misiones">Misiones</option>
                                    <option value="Neuquén">Neuquén</option>
                                    <option value="Río Negro">Río Negro</option>
                                    <option value="Salta">Salta</option>
                                    <option value="San Juan">San Juan</option>
                                    <option value="San Luis">San Luis</option>
                                    <option value="Santa Cruz">Santa Cruz</option>
                                    <option value="Santa Fe">Santa Fe</option>
                                    <option value="Santiago del Estero">Santiago del Estero</option>
                                    <option value="Tierra del Fuego, Antártida e Islas del Atlántico Sur">Tierra del Fuego, Antártida e Islas del Atlántico Sur</option>
                                    <option value="Tucumán">Tucumán</option>
                                </select>
                            </div>
                            <div class="mb-5">
                                <label for="personal-city" class="block text-gray-600 font-medium mb-2">Ciudad</label>
                                <select id="personal-city" name="personal-city" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                    <option value="">Selecciona tu provincia primero</option>
                                </select>
                            </div>
                            <div class="mb-5">
                                <label for="address-street" class="block text-gray-600 font-medium mb-2">Dirección</label>
                                <div class="flex gap-4">
                                    <input type="text" id="address-street" name="address-street" class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Calle" required>
                                    <input type="text" id="address-number" name="address-number" class="w-1/3 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Número" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                                </div>
                            </div>
                            <div class="mb-5">
                                <label for="phone" class="block text-gray-600 font-medium mb-2">Teléfono</label>
                                <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Para coordinar tu primera campaña exclusiva" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                            </div>
                            <div class="mb-5">
                                <label for="email" class="block text-gray-600 font-medium mb-2">Correo Electrónico</label>
                                <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Te enviaremos las ofertas de campaña. (Confidencial)" required>
                            </div>
                            <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300">
                                Guardar y Continuar
                            </button>
                        </form>
                    </div>
    
                    <div id="vehicle-data-container" class="bg-white p-10 rounded-2xl shadow-xl border border-gray-200 hidden max-w-2xl w-full">
                        <!-- Contenido del formulario de vehículo (sin cambios) -->
                        <div class="relative">
                            <h3 id="vehicle-form-title" class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-2 pr-32">2. Tu Vehículo: El Motor de tus Ganancias</h3>
                             <button id="scroll-to-finish-btn" class="absolute top-[-10px] right-0 bg-green-500 text-white font-bold py-2 px-3 rounded-lg flex items-center gap-2 hover:bg-green-600 transition-colors duration-300 shadow-md transform hover:scale-105 hidden">
                                ¡TERMINÉ!
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                        </div>
                        <div id="driver-id-display" class="hidden bg-gray-100 p-4 rounded-lg text-center mb-4 border border-gray-300">
                            <p class="text-gray-600 font-medium">ID de Conductor:</p>
                            <span id="generated-id" class="text-3xl font-bold text-blue-600"></span>
                        </div>
                        <form id="vehicle-data-form" novalidate>
                            <div class="mb-5">
                                <label for="vehicle-type" class="block text-gray-600 font-medium mb-2">Tipo de Vehículo</label>
                                <select id="vehicle-type" name="vehicle-type" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                    <option value="">Auto, Moto, Bici. ¿Cuál genera tus ganancias?</option>
                                    <option value="AUTO/CAMIONETA">AUTO/CAMIONETA</option>
                                    <option value="MOTO">MOTO</option>
                                    <option value="BICI">BICI</option>
                                </select>
                            </div>
                            <div id="backpack-option-container" class="mb-5 hidden">
                                <div class="flex items-center p-4 border border-gray-200 rounded-lg bg-gray-50">
                                    <input id="wants-backpack" name="wants-backpack" type="checkbox" class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="wants-backpack" class="ml-3 block text-gray-700 font-medium flex items-center cursor-pointer">
                                        Quiero sumar mi mochila de repartidor
                                        <div class="relative flex items-center ml-2 group">
                                            <span class="bg-black text-white rounded-full h-5 w-5 flex items-center justify-center text-xs font-bold">i</span>
                                            <div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-3 text-sm text-white bg-gray-900 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10">
                                                Podes agregar publicidad en tu mochila de repartidor si la consideras disponible para hacer publicidad y ganar unos $ de mas !!
                                                <div class="absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-gray-900"></div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div id="brand-container" class="mb-5">
                                <label for="brand" class="block text-gray-600 font-medium mb-2">Marca</label>
                                <input type="text" id="brand" name="brand" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Ford, Honda, Scott" required>
                            </div>
                            <div id="model-container" class="mb-5">
                                <label for="model" class="block text-gray-600 font-medium mb-2">Modelo</label>
                                <input type="text" id="model" name="model" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Ranger, YBR, Aspect" required>
                            </div>
                            <div class="mb-5">
                                <label for="color" class="block text-gray-600 font-medium mb-2">Color</label>
                                <input type="text" id="color" name="color" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Para que el vinilo combine perfecto" required>
                            </div>
                            <div id="year-container" class="mb-5">
                                <label for="year" class="block text-gray-600 font-medium mb-2">Año</label>
                                <input type="number" id="year" name="year" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: 2022" required>
                            </div>
                            <div id="license-plate-container" class="mb-5">
                                <label for="license-plate" class="block text-gray-600 font-medium mb-2">Patente / Matrícula</label>
                                <input type="text" id="license-plate" name="license-plate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: AA 123 BC (Información confidencial)" required>
                            </div>
                            <div class="mb-5">
                                <label for="vehicle-province" class="block text-gray-600 font-medium mb-2">Provincia (del vehículo)</label>
                                <select id="vehicle-province" name="vehicle-province" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                    <option value="">Seleccione una provincia</option>
                                    <option value="Buenos Aires">Buenos Aires</option>
                                    <option value="Catamarca">Catamarca</option>
                                    <option value="Chaco">Chaco</option>
                                    <option value="Chubut">Chubut</option>
                                    <option value="Córdoba">Córdoba</option>
                                    <option value="Corrientes">Corrientes</option>
                                    <option value="Entre Ríos">Entre Ríos</option>
                                    <option value="Formosa">Formosa</option>
                                    <option value="Jujuy">Jujuy</option>
                                    <option value="La Pampa">La Pampa</option>
                                    <option value="La Rioja">La Rioja</option>
                                    <option value="Mendoza">Mendoza</option>
                                    <option value="Misiones">Misiones</option>
                                    <option value="Neuquén">Neuquén</option>
                                    <option value="Río Negro">Río Negro</option>
                                    <option value="Salta">Salta</option>
                                    <option value="San Juan">San Juan</option>
                                    <option value="San Luis">San Luis</option>
                                    <option value="Santa Cruz">Santa Cruz</option>
                                    <option value="Santa Fe">Santa Fe</option>
                                    <option value="Santiago del Estero">Santiago del Estero</option>
                                    <option value="Tierra del Fuego, Antártida e Islas del Atlántico Sur">Tierra del Fuego, Antártida e Islas del Atlántico Sur</option>
                                    <option value="Tucumán">Tucumán</option>
                                </select>
                            </div>
                            <div class="mb-5">
                                <label for="vehicle-city" class="block text-gray-600 font-medium mb-2">Ciudad (del vehículo)</label>
                                <select id="vehicle-city" name="vehicle-city" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                    <option value="">Seleccione una provincia primero</option>
                                </select>
                            </div>
                            <div class="mb-5">
                                <label for="zone-input" class="block text-gray-600 font-medium mb-2">Zona de Circulación Habitual</label>
                                <div class="relative">
                                    <input type="text" id="zone-input" class="w-full px-4 py-3 pr-16 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Centro, Nueva Córdoba, Ruta 9. (Máximo impacto)">
                                    <button type="button" id="add-zone-btn" class="absolute inset-y-0 right-0 hidden bg-blue-600 text-white font-semibold py-2 px-4 m-1 rounded-lg shadow-md hover:bg-blue-700 transition duration-300">OK</button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Zonas por las que el vehículo circula generalmente, esto nos ayuda a encontrar campañas que se adapten a tus recorridos, mínimo 3.</p>
                                <div id="zone-pills-container" class="mt-3 flex flex-wrap gap-2">
                                </div>
                            </div>
                             <div class="mb-5">
                                <label for="address-street-vehicle" class="block text-gray-600 font-medium mb-2">Dirección de Residencia (del vehículo)</label>
                                <div class="flex gap-4">
                                    <input type="text" id="address-street-vehicle" name="address-street-vehicle" class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Calle. Para coordinar la instalación." required>
                                    <input type="text" id="address-number-vehicle" name="address-number-vehicle" class="w-1/3 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Número" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                                </div>
                            </div>
                             <div class="mb-5">
                                <label for="image" class="block text-gray-600 font-medium mb-2">Foto de tu Vehículo (Opcional)</label>
                                <input type="file" id="image" name="image" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                            </div>
                        </form>
                        <div id="added-vehicles-list" class="mt-6 border-t pt-4 border-gray-300">
                            </div>
                        <div class="flex flex-col sm:flex-row gap-4 mt-6">
                            <button id="add-vehicle-btn" class="w-full sm:w-1/2 bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-500 transition duration-300">
                                + Agregar Otro Vehículo y Duplicar Ganancias
                            </button>
                            <button id="finish-vehicles-btn" class="w-full sm:w-1/2 bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300">
                                ¡Listo! Empezar a Recibir Ofertas
                            </button>
                        </div>
                    </div>
                </div>
            </section>
    
            <!-- Formulario de Gráficas (Sin cambios de lógica) -->
            <section id="graphs-section" class="section-container w-full">
                <div class="container mx-auto px-6 text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-12">Cómo Crecer con Addly: Beneficios para Socios Gráficos</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">01</div>
                            <h3 class="text-xl font-semibold mb-2">Garantía de Trabajo</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Cómo me aseguran un flujo de trabajo constante?</p>
                            <p class="text-gray-600">Addly genera campañas de alto volumen para grandes marcas. Al formar parte de nuestra Red Nacional, te aseguramos una carga de trabajo constante y predecible que se ajusta a la capacidad semanal que nos indiques. No más tiempo ocioso en el taller.</p>
                        </div>
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">02</div>
                            <h3 class="text-xl font-semibold mb-2">El Proceso (Rapidez y Precio)</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Cómo funciona el proceso de pedidos?</p>
                            <p class="text-gray-600">Es un sistema rápido: Addly te enviará la solicitud de rotulación o fabricación con todos los detalles técnicos (incluyendo los moldes para el corte de policarbonato). Tú ejecutas el servicio en la fecha agendada.</p>
                        </div>
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">03</div>
                            <h3 class="text-xl font-semibold mb-2">Rentabilidad (El Precio Máximo)</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Cómo garantizo mi ganancia?</p>
                            <p class="text-gray-600">Nuestra plataforma está diseñada para el beneficio mutuo. En la tabla de costos, siempre utilizaremos tu Precio MÁXIMO (el costo más alto) para cotizar al cliente final. Esto asegura que tu margen esté cubierto sin importar la variación de tamaño del vehículo.</p>
                        </div>
                        <div class="text-center">
                            <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-600 text-white font-bold text-2xl mx-auto mb-4">04</div>
                            <h3 class="text-xl font-semibold mb-2">Requisito Clave</h3>
                            <p class="font-semibold text-gray-700 mb-2">¿Qué servicios debo cumplir?</p>
                            <p class="text-gray-600">Para ser un socio integral, tu taller debe tener la capacidad de realizar el ciclo completo de servicio: Instalación (aplicación) y Retiro (desinstalación y limpieza) de vinilos y cartelería, incluyendo el corte a medida de los paneles para bicicletas.</p>
                        </div>
                    </div>
                </div>
                <img src="https://i.postimg.cc/LsTK3hF9/logo-gen-camp.png" alt="Logo Addly" class="mx-auto mb-6 h-32">
                <h2 class="text-4xl font-semibold text-gray-800 mb-8 text-center">¡Asóciate con Addly! Registro para Gráficas Profesionales</h2>
                <div class="bg-white p-10 rounded-2xl shadow-xl border border-gray-200 max-w-2xl w-full mx-auto">
                    <h3 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-2">1. Datos de tu Taller (Socio Gráfico)</h3>
                    <form id="graphs-form" novalidate>
                        <!-- Campos del formulario de gráficas (sin cambios) -->
                        <div class="mb-5">
                            <label for="graph-name" class="block text-gray-600 font-medium mb-2">Nombre de tu Taller / Marca</label>
                            <input type="text" id="graph-name" name="graph-name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Rotulaciones Express" required>
                        </div>
                        <div class="mb-5">
                            <label for="manager-name" class="block text-gray-600 font-medium mb-2">Nombre del Contacto Principal</label>
                            <input type="text" id="manager-name" name="manager-name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: Juan Pérez, Encargado de Instalación" required>
                        </div>
                        <div class="mb-5">
                            <label for="graph-phone" class="block text-gray-600 font-medium mb-2">Teléfono de Contacto Rápido</label>
                            <input type="tel" id="graph-phone" name="graph-phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Para coordinar instalaciones urgentes" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                        </div>
                        <div class="mb-5">
                            <label for="graph-email" class="block text-gray-600 font-medium mb-2">Correo Electrónico</label>
                            <input type="email" id="graph-email" name="graph-email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Ej: contacto@taller.com" required>
                        </div>
                         <div class="mb-5">
                            <label for="graphs-province" class="block text-gray-600 font-medium mb-2">Provincia</label>
                            <select id="graphs-province" name="graphs-province" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                <option value="">Seleccione una provincia</option>
                                <option value="Buenos Aires">Buenos Aires</option>
                                <option value="Catamarca">Catamarca</option>
                                <option value="Chaco">Chaco</option>
                                <option value="Chubut">Chubut</option>
                                <option value="Córdoba">Córdoba</option>
                                <option value="Corrientes">Corrientes</option>
                                <option value="Entre Ríos">Entre Ríos</option>
                                <option value="Formosa">Formosa</option>
                                <option value="Jujuy">Jujuy</option>
                                <option value="La Pampa">La Pampa</option>
                                <option value="La Rioja">La Rioja</option>
                                <option value="Mendoza">Mendoza</option>
                                <option value="Misiones">Misiones</option>
                                <option value="Neuquén">Neuquén</option>
                                <option value="Río Negro">Río Negro</option>
                                <option value="Salta">Salta</option>
                                <option value="San Juan">San Juan</option>
                                <option value="San Luis">San Luis</option>
                                <option value="Santa Cruz">Santa Cruz</option>
                                <option value="Santa Fe">Santa Fe</option>
                                <option value="Santiago del Estero">Santiago del Estero</option>
                                <option value="Tierra del Fuego, Antártida e Islas del Atlántico Sur">Tierra del Fuego, Antártida e Islas del Atlántico Sur</option>
                                <option value="Tucumán">Tucumán</option>
                            </select>
                        </div>
                        <div class="mb-5">
                            <label for="graph-location" class="block text-gray-600 font-medium mb-2">Ciudad</label>
                            <select id="graph-location" name="graph-location" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" required>
                                <option value="">Seleccione una provincia primero</option>
                            </select>
                        </div>
                        <div class="mb-5">
                            <label for="graph-address-street" class="block text-gray-600 font-medium mb-2">Dirección del Taller</label>
                            <div class="flex gap-4">
                                <input type="text" id="graph-address-street" name="graph-address-street" class="flex-grow px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Calle. Dinos dónde te encontramos." required>
                                <input type="text" id="graph-address-number" name="graph-address-number" class="w-1/3 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Número" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                            </div>
                        </div>
                         <div class="mb-5">
                            <label for="weekly-capacity" class="block text-gray-600 font-medium mb-2">Capacidad de Instalaciones Semanales (Unidades)</label>
                            <input type="number" id="weekly-capacity" name="weekly-capacity" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" placeholder="Número" required>
                             <p class="text-sm text-gray-600 mt-2">Número máximo de vehículos completos que pueden rotular a la semana. Necesitamos un número realista y conservador para garantizar el flujo de trabajo sin sobrecargar su capacidad.</p>
                        </div>
                        <div class="mb-5">
                            <div class="flex items-center justify-between mb-3">
                                <label class="block text-gray-600 font-medium">Días y Horarios de Atención</label>
                                <div class="flex items-center">
                                    <input type="checkbox" id="apply-all-hours" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="apply-all-hours" class="ml-2 text-sm text-gray-600 cursor-pointer select-none">Aplicar el horario a todos los días</label>
                                </div>
                            </div>
                            <div id="operating-hours-container" class="space-y-3 border border-gray-200 p-4 rounded-lg">
                                </div>
                             <p class="text-xs text-gray-500 mt-2">Seleccione los días que el taller está abierto e ingrese los horarios de atención.</p>
                        </div>
                        <div class="mb-5">
                             <div class="flex items-center p-4 border border-gray-200 rounded-lg bg-gray-50">
                                <input id="service-commitment" name="service-commitment" type="checkbox" class="h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" required>
                                <label for="service-commitment" class="ml-3 block text-gray-700 font-medium">
                                    Compromiso con el Servicio Integral (Instalación y Retiro)
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">Este campo es obligatorio. Al marcarlo, usted acepta y se compromete a realizar tanto la instalación como el retiro del vinilo en todos los vehículos asignados por Addly.</p>
                        </div>
                        <div class="mb-5 border-t border-gray-200 pt-5">
                            <h4 class="text-xl font-semibold text-gray-700">Cotización por Vehículo y Partes</h4>
                            <p class="text-sm text-gray-600 mt-2 mb-4">
                                Ingrese el rango de cotización para cada tipo de instalación. Los precios pueden variar según el modelo y tamaño. Especifique el tipo de vinilo y las horas estimadas para completar el trabajo.
                            </p>
                            <div class="flex flex-col space-y-4">
                                <!-- Secciones de precios (sin cambios) -->
                                <div>
                                    <p class="text-lg text-gray-700 p-3 border border-gray-200 rounded-lg bg-gray-100 font-semibold">Auto</p>
                                    <div class="pl-6 mt-2 space-y-3">
                                        <div class="p-3 border-l-4 border-blue-300 bg-gray-50 rounded-r-lg space-y-2">
                                            <div class="flex justify-between items-center text-md text-gray-800 font-medium">
                                                <span>Auto completo</span>
                                                <span class="text-sm text-gray-500 font-normal">(8-12 m²)</span>
                                            </div>
                                            <div class="flex items-center justify-center gap-2">
                                                <label for="price-from-auto-completo" class="text-sm text-gray-600">DESDE</label>
                                                <input type="text" id="price-from-auto-completo" name="price-from-auto-completo" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                                <span class="text-gray-600 font-bold">-</span>
                                                <label for="price-to-auto-completo" class="text-sm text-gray-600">HASTA</label>
                                                <input type="text" id="price-to-auto-completo" name="price-to-auto-completo" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            </div>
                                            <div>
                                                <input type="text" name="vinyl-auto-completo" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                            </div>
                                            <div class="flex justify-center items-center gap-2">
                                                <input type="text" name="installation-time-auto-completo" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 8" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                                <span class="text-gray-600">horas</span>
                                            </div>
                                        </div>
                                        <div class="p-3 border-l-4 border-blue-300 bg-gray-50 rounded-r-lg space-y-2">
                                            <div class="flex justify-between items-center text-md text-gray-800 font-medium">
                                                <span>Capot</span>
                                                <span class="text-sm text-gray-500 font-normal">(18,000-23,000 cm²)</span>
                                            </div>
                                            <div class="flex items-center justify-center gap-2">
                                                <label for="price-from-capot" class="text-sm text-gray-600">DESDE</label>
                                                <input type="text" id="price-from-capot" name="price-from-capot" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                                <span class="text-gray-600 font-bold">-</span>
                                                <label for="price-to-capot" class="text-sm text-gray-600">HASTA</label>
                                                <input type="text" id="price-to-capot" name="price-to-capot" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            </div>
                                            <div>
                                                <input type="text" name="vinyl-capot" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                            </div>
                                             <div class="flex justify-center items-center gap-2">
                                                <input type="text" name="installation-time-capot" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 2" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                                 <span class="text-gray-600">horas</span>
                                            </div>
                                        </div>
                                        <div class="p-3 border-l-4 border-blue-300 bg-gray-50 rounded-r-lg space-y-2">
                                            <div class="flex justify-between items-center text-md text-gray-800 font-medium">
                                                <span>Puertas</span>
                                                <span class="text-sm text-gray-500 font-normal">(10,000-14,000 cm² c/u)</span>
                                            </div>
                                            <div class="flex items-center justify-center gap-2">
                                                <label for="price-from-puertas" class="text-sm text-gray-600">DESDE</label>
                                                <input type="text" id="price-from-puertas" name="price-from-puertas" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                                <span class="text-gray-600 font-bold">-</span>
                                                <label for="price-to-puertas" class="text-sm text-gray-600">HASTA</label>
                                                <input type="text" id="price-to-puertas" name="price-to-puertas" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            </div>
                                            <div>
                                                <input type="text" name="vinyl-puertas" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                            </div>
                                            <div class="flex justify-center items-center gap-2">
                                                <input type="text" name="installation-time-puertas" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 1.5" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                                 <span class="text-gray-600">horas</span>
                                            </div>
                                        </div>
                                        <div class="p-3 border-l-4 border-blue-300 bg-gray-50 rounded-r-lg space-y-2">
                                            <div class="flex justify-between items-center text-md text-gray-800 font-medium">
                                                <span>Baul</span>
                                                <span class="text-sm text-gray-500 font-normal">(5,000-7,000 cm²)</span>
                                            </div>
                                            <div class="flex items-center justify-center gap-2">
                                                <label for="price-from-baul" class="text-sm text-gray-600">DESDE</label>
                                                <input type="text" id="price-from-baul" name="price-from-baul" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                                <span class="text-gray-600 font-bold">-</span>
                                                <label for="price-to-baul" class="text-sm text-gray-600">HASTA</label>
                                                <input type="text" id="price-to-baul" name="price-to-baul" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            </div>
                                            <div>
                                                <input type="text" name="vinyl-baul" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                            </div>
                                            <div class="flex justify-center items-center gap-2">
                                                <input type="text" name="installation-time-baul" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 1" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                                 <span class="text-gray-600">horas</span>
                                            </div>
                                        </div>
                                        <div class="p-3 border-l-4 border-blue-300 bg-gray-50 rounded-r-lg space-y-2">
                                            <div class="flex justify-between items-center text-md text-gray-800 font-medium">
                                                <span>Luneta</span>
                                                <span class="text-sm text-gray-500 font-normal">(6,500-12,000 cm²)</span>
                                            </div>
                                            <div class="flex items-center justify-center gap-2">
                                                <label for="price-from-luneta" class="text-sm text-gray-600">DESDE</label>
                                                <input type="text" id="price-from-luneta" name="price-from-luneta" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                                <span class="text-gray-600 font-bold">-</span>
                                                <label for="price-to-luneta" class="text-sm text-gray-600">HASTA</label>
                                                <input type="text" id="price-to-luneta" name="price-to-luneta" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            </div>
                                            <div>
                                                <input type="text" name="vinyl-luneta" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                            </div>
                                            <div class="flex justify-center items-center gap-2">
                                                <input type="text" name="installation-time-luneta" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 1" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                                 <span class="text-gray-600">horas</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center text-lg text-gray-700 p-3 border border-gray-200 rounded-lg bg-gray-100 font-semibold">
                                        <span>Moto</span>
                                        <span class="text-sm text-gray-500 font-normal">(5,000-15,000 cm²)</span>
                                    </div>
                                    <div class="mt-2 px-3 pb-2 space-y-3">
                                        <div class="flex items-center justify-center gap-2">
                                            <label for="price-from-moto" class="text-sm text-gray-600">DESDE</label>
                                            <input type="text" id="price-from-moto" name="price-from-moto" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            <span class="text-gray-600 font-bold">-</span>
                                            <label for="price-to-moto" class="text-sm text-gray-600">HASTA</label>
                                            <input type="text" id="price-to-moto" name="price-to-moto" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                        </div>
                                        <div>
                                            <input type="text" name="vinyl-moto" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                        </div>
                                        <div class="flex justify-center items-center gap-2">
                                            <input type="text" name="installation-time-moto" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 3" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                             <span class="text-gray-600">horas</span>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-lg text-gray-700 p-3 border border-gray-200 rounded-lg bg-gray-100 font-semibold">Bici</p>
                                    <div class="mt-2 px-3 pb-2 space-y-3">
                                        <div class="flex items-center justify-center gap-2">
                                            <label for="price-from-bici" class="text-sm text-gray-600">DESDE</label>
                                            <input type="text" id="price-from-bici" name="price-from-bici" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            <span class="text-gray-600 font-bold">-</span>
                                            <label for="price-to-bici" class="text-sm text-gray-600">HASTA</label>
                                            <input type="text" id="price-to-bici" name="price-to-bici" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                        </div>
                                        <div>
                                            <input type="text" name="vinyl-bici" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                        </div>
                                        <div class="flex justify-center items-center gap-2">
                                            <input type="text" name="installation-time-bici" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 1" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                             <span class="text-gray-600">horas</span>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between items-center text-lg text-gray-700 p-3 border border-gray-200 rounded-lg bg-gray-100 font-semibold">
                                        <span>Mochila de repartidor</span>
                                        <span class="text-sm text-gray-500 font-normal">(15 x 33 cm)</span>
                                    </div>
                                    <div class="mt-2 px-3 pb-2 space-y-3">
                                        <div class="flex items-center justify-center gap-2">
                                            <label for="price-from-mochila" class="text-sm text-gray-600">DESDE</LAbel>
                                            <input type="text" id="price-from-mochila" name="price-from-mochila" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                            <span class="text-gray-600 font-bold">-</span>
                                            <label for="price-to-mochila" class="text-sm text-gray-600">HASTA</label>
                                            <input type="text" id="price-to-mochila" name="price-to-mochila" class="w-24 px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center" placeholder="$">
                                        </div>
                                        <div>
                                            <input type="text" name="vinyl-mochila" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors placeholder:text-center" placeholder="Tipo de vinilo">
                                        </div>
                                        <div class="flex justify-center items-center gap-2">
                                            <input type="text" name="installation-time-mochila" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors text-center" placeholder="Ej: 0.5" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');">
                                             <span class="text-gray-600">horas</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300">
                            Guardar Datos de la Gráfica
                        </button>
                    </form>
                    <div id="graph-id-display" class="hidden bg-gray-100 p-4 rounded-lg text-center mt-6 border border-gray-300">
                        <p class="text-gray-600 font-medium">ID de Gráfica:</p>
                        <span id="generated-graph-id" class="text-3xl font-bold text-blue-600"></span>
                    </div>
                </div>
            </section>
    
            </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <script type="module">
        // Firebase Imports (Sin cambios)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, runTransaction, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Pop-up Modal Elements (Sin cambios) ---
        const modalOverlay = document.getElementById('success-modal-overlay');
        const modalBox = document.getElementById('success-modal-box');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        // [NUEVO] Elementos CTA Flotantes
        const floatingCtaMobile = document.getElementById('floating-cta-mobile');
        const floatingCtaDesktop = document.getElementById('floating-cta-desktop');

        // --- Helper Function (Sin cambios) ---
        const showSuccessModal = (title, message, redirectOnClose = false) => {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalOverlay.dataset.redirectOnClose = redirectOnClose;
            modalOverlay.classList.remove('hidden');
            setTimeout(() => {
                modalOverlay.classList.remove('opacity-0');
                modalBox.classList.remove('opacity-0', 'scale-95');
            }, 10);
        };
        
        const hideSuccessModal = () => {
            modalOverlay.classList.add('opacity-0');
            modalBox.classList.add('opacity-0', 'scale-95');
            setTimeout(() => {
                modalOverlay.classList.add('hidden');
            }, 300);
        };
        
        const handleModalClose = () => {
            const shouldRedirect = modalOverlay.dataset.redirectOnClose === 'true';
            hideSuccessModal();
            if (shouldRedirect) {
                setTimeout(() => {
                    returnToInitialView();
                    delete modalOverlay.dataset.redirectOnClose; // Clean up
                }, 300); 
            }
        }

        modalCloseBtn.addEventListener('click', handleModalClose);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                handleModalClose();
            }
        });


        const showMessage = (message, isSuccess) => {
            // [MODIFICADO] Ya no solo para errores
            // if(isSuccess) return; 

            const messageBox = document.createElement('div');
            messageBox.textContent = message;
            
            // [MODIFICADO] Color dinámico
            const bgColor = isSuccess ? 'bg-green-500' : 'bg-red-500';
            messageBox.className = `fixed bottom-5 right-5 p-4 rounded-lg shadow-lg text-white font-medium transition-transform transform z-50 ${bgColor}`;
            
            document.body.appendChild(messageBox);
            setTimeout(() => {
                messageBox.style.transform = 'translateY(200%)';
                messageBox.addEventListener('transitionend', () => messageBox.remove());
            }, 5000); // 5 segundos
        };

        // --- Firebase Setup (Sin cambios) ---
        const firebaseConfig = {
          apiKey: "AIzaSyDZkQgLJd_pqk98MEZoMlo-6SFYxJqtbnU",
          authDomain: "gestor-addly.firebaseapp.com",
          projectId: "gestor-addly",
          storageBucket: "gestor-addly.firebasestorage.app",
          messagingSenderId: "1072574102423",
          appId: "1:1072574102423:web:958ccd03f7c327a9c862d2",
          measurementId: "G-1M90X7WGEN"
        };
        
        let app, db, auth;
        let currentDriverData = null; 
        let currentZones = []; 

        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                 try {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } catch (tokenError) {
                    console.warn("signInWithCustomToken failed, falling back to anonymous sign-in.", tokenError);
                    await signInAnonymously(auth);
                }
            } else {
                await signInAnonymously(auth);
            }
            console.log("Firebase initialized and user signed in.");
        } catch (error) {
            console.error("Firebase initialization failed:", error);
            if (error.code === 'auth/configuration-not-found') {
                showMessage("Error de Firebase: La autenticación no está configurada. Habilite un proveedor de inicio de sesión (ej: 'Anónimo') en su Consola de Firebase > Authentication > Sign-in method.", false);
            } else {
                showMessage("Error al conectar con la base de datos.", false);
            }
        }

        // --- DOM Elements (Sin cambios, se preservan todos los IDs) ---
        const initialView = document.getElementById('initial-view');
        const appContent = document.getElementById('app-content');
        const backToHomeBtn = document.getElementById('back-to-home');
        
        const generatedIdElement = document.getElementById('generated-id');
        const driverIdDisplay = document.getElementById('driver-id-display');
        const generatedGraphIdElement = document.getElementById('generated-graph-id');
        const graphIdDisplay = document.getElementById('graph-id-display');

        const driversSection = document.getElementById('drivers-section');
        const graphsSection = document.getElementById('graphs-section');
        const personalDataContainer = document.getElementById('personal-data-container');
        const vehicleDataContainer = document.getElementById('vehicle-data-container');
        const vehicleFormTitle = document.getElementById('vehicle-form-title');

        const addVehicleBtn = document.getElementById('add-vehicle-btn');
        const finishVehiclesBtn = document.getElementById('finish-vehicles-btn');
        const scrollToFinishBtn = document.getElementById('scroll-to-finish-btn');
        const addedVehiclesList = document.getElementById('added-vehicles-list');

        const zoneInput = document.getElementById('zone-input');
        const addZoneBtn = document.getElementById('add-zone-btn');
        const zonePillsContainer = document.getElementById('zone-pills-container');
        
        const vehicleTypeSelect = document.getElementById('vehicle-type');
        const backpackOptionContainer = document.getElementById('backpack-option-container');

        const brandContainer = document.getElementById('brand-container');
        const modelContainer = document.getElementById('model-container');
        const yearContainer = document.getElementById('year-container');
        const licensePlateContainer = document.getElementById('license-plate-container');
        const brandInput = document.getElementById('brand');
        const modelInput = document.getElementById('model');
        const yearInput = document.getElementById('year');
        const licensePlateInput = document.getElementById('license-plate');

        const driverEmailInput = document.getElementById('email');
        const graphEmailInput = document.getElementById('graph-email');

        const sections = {
            'drivers': driversSection,
            'graphs': graphsSection
        };

        // --- City and Province Data (Sin cambios) ---
        const provincesAndCities = {
            "Buenos Aires": ["La Plata (Capital)", "Mar del Plata", "Bahía Blanca", "San Nicolás de los Arroyos", "General Pueyrredón", "Moreno", "Quilmes", "Vicente López", "Tigre", "Lomas de Zamora", "La Matanza", "Pilar", "Berisso", "San Fernando"],
            "Catamarca": ["San Fernando del Valle de Catamarca (Capital)", "Valle Viejo", "Tinogasta", "Santa María", "Andalgalá", "Belén", "Recreo"],
            "Chaco": ["Resistencia (Capital)", "Barranqueras", "Charata", "Castelli", "Sáenz Peña", "Villa Ángela", "Las Palmas"],
            "Chubut": ["Rawson (Capital)", "Comodoro Rivadavia", "Puerto Madryn", "Trelew", "Esquel", "Sarmiento", "Rada Tilly"],
            "Córdoba": ["Córdoba (Capital)", "Villa Carlos Paz", "Río Cuarto", "Villa María", "Jesús María", "Alta Gracia", "San Francisco"],
            "Corrientes": ["Corrientes (Capital)", "Goya", "Santo Tomé", "Curuzú Cuatiá", "Paso de los Libres", "Mercedes", "Bella Vista"],
            "Entre Ríos": ["Paraná (Capital)", "Concordia", "Gualeguaychú", "Concepción del Uruguay", "Federación", "Victoria", "Villaguay"],
            "Formosa": ["Formosa (Capital)", "Clorinda", "Las Lomitas", "Ingeniero Juárez"],
            "Jujuy": ["San Salvador de Jujuy (Capital)", "San Pedro de Jujuy", "Libertador General San Martín", "Perico", "Palpalá"],
            "La Pampa": ["Santa Rosa (Capital)", "General Pico", "Eduardo Castex", "Realicó", "Toay"],
            "La Rioja": ["La Rioja (Capital)", "Chilecito", "Aimogasta", "Chepes"],
            "Mendoza": ["Mendoza (Capital)", "San Rafael", "Godoy Cruz", "Maipú", "Las Heras", "Guaymallén", "Luján de Cuyo"],
            "Misiones": ["Posadas (Capital)", "Eldorado", "Oberá", "Puerto Iguazú", "San Vicente"],
            "Neuquén": ["Neuquén (Capital)", "Plottier", "Cutral Có", "Centenario", "San Martín de los Andes"],
            "Río Negro": ["Viedma (Capital)", "General Roca", "San Carlos de Barilochem", "Cipolletti", "Villa Regina", "El Bolsón"],
            "Salta": ["Salta (Capital)", "San Ramón de la Nueva Orán", "Tartagal", "Metán", "Cafayate", "Rosario de la Frontera"],
            "San Juan": ["San Juan (Capital)", "Caucete", "Rivadavia", "Chimbas", "San José de Jáchal"],
            "San Luis": ["San Luis (Capital)", "Villa Mercedes", "Merlo", "La Punta", "Juana Koslay"],
            "Santa Cruz": ["Río Gallegos (Capital)", "Caleta Olivia", "Pico Truncado", "Puerto Deseado", "El Calafate"],
            "Santa Fe": ["Santa Fe (Capital)", "Rosario", "Venado Tuerto", "Rafaela", "Reconquista", "Santo Tomé"],
            "Santiago del Estero": ["Santiago del Estero (Capital)", "La Banda", "Termas de Río Hondo", "Añatuya", "Frías"],
            "Tierra del Fuego, Antártida e Islas del Atlántico Sur": ["Ushuaia (Capital)", "Río Grande", "Tolhuin"],
            "Tucumán": ["San Miguel de Tucumán (Capital)", "Yerba Buena", "Concepción", "Tafí Viejo", "Banda del Río Salí"]
        };
        
        // --- Utility Function: Populate Select (Sin cambios) ---
        function populateSelect(selectElement, items, placeholder) {
            selectElement.innerHTML = `<option value="">${placeholder}</option>`;
            items.forEach(item => {
                const option = document.createElement('option');
                option.value = item;
                option.textContent = item;
                selectElement.appendChild(option);
            });
        }

        // --- City/Province Select Logic (Sin cambios) ---
        // Se aplica a los 4 pares de selects de provincia/ciudad
        function setupProvinceCitySelects(provinceSelectId, citySelectId) {
            const provinceSelect = document.getElementById(provinceSelectId);
            const citySelect = document.getElementById(citySelectId);
            
            if (!provinceSelect || !citySelect) return;

            // Llenar provincias
            const provinces = Object.keys(provincesAndCities);
            populateSelect(provinceSelect, provinces, "Seleccione una provincia");

            // Event listener
            provinceSelect.addEventListener('change', () => {
                const selectedProvince = provinceSelect.value;
                if (selectedProvince && provincesAndCities[selectedProvince]) {
                    populateSelect(citySelect, provincesAndCities[selectedProvince], "Seleccione una ciudad");
                } else {
                    citySelect.innerHTML = '<option value="">Seleccione una provincia primero</option>';
                }
            });
        }
        
        // --- Navigation Logic (MODIFICADO para ocultar CTA flotante) ---
        function switchSection(sectionId) {
            Object.values(sections).forEach(section => {
                if(section) section.classList.remove('active');
            });

            const activeSection = sections[sectionId];
            if (activeSection) {
                activeSection.classList.add('active');
                initialView.classList.add('hidden');
                appContent.classList.remove('hidden');
                window.scrollTo(0, 0);

                // [MODIFICADO] Ocultar botones flotantes
                if (floatingCtaMobile) floatingCtaMobile.style.display = 'none';
                if (floatingCtaDesktop) floatingCtaDesktop.style.display = 'none';
            }
        }

        function returnToInitialView() {
            initialView.classList.remove('hidden');
            appContent.classList.add('hidden');
            window.scrollTo(0, 0);

            // [MODIFICADO] Mostrar botones flotantes (quitando el estilo en línea)
            if (floatingCtaMobile) floatingCtaMobile.style.display = '';
            if (floatingCtaDesktop) floatingCtaDesktop.style.display = '';
        }

        // --- Page Load & Initial Setup (MODIFICADO) ---
        document.addEventListener('DOMContentLoaded', () => {
            // [CRO] Hero Counter (Sin cambios)
            const impactCounter = document.getElementById('impact-counter');
            if(impactCounter) {
                let count = 0;
                const target = 15734; // Número final
                const duration = 2000; // 2 segundos
                const increment = Math.ceil(target / (duration / 20)); 

                const updateCount = () => {
                    count += increment;
                    if (count > target) {
                        count = target;
                    }
                    impactCounter.textContent = count.toLocaleString('es-AR');
                    if (count < target) {
                        setTimeout(updateCount, 20);
                    }
                };
                updateCount();
            }

            // [CRO] Activity Feed (Sin cambios)
            const activityFeed = document.getElementById('activity-feed');
            if(activityFeed) {
                const activities = [
                    "Hace 5 min: Campaña de Gaseosa verificada en Rosario.",
                    "Hace 12 min: Nuevo Socio Conductor (Moto) registrado en Palermo.",
                    "Hace 28 min: Campaña de Supermercado verificada en Córdoba.",
                    "Hace 47 min: TallerFlash Campaña de Bicis verificada en Mendoza."
                ];
                let activityIndex = 0;

                const updateActivity = () => {
                    const text = activities[activityIndex];
                    activityFeed.innerHTML = ''; // Limpiar
                    
                    text.split('').forEach((char, index) => {
                        const span = document.createElement('span');
                        span.textContent = char;
                        span.style.animationDelay = `${index * 0.03}s`; // Efecto "fade in" letra por letra
                        activityFeed.appendChild(span);
                    });
                    
                    activityIndex = (activityIndex + 1) % activities.length;
                };

                updateActivity();
                setInterval(updateActivity, 5000); // Cambia cada 5 segundos
            }

            // [CRO] Scroll Arrow (Sin cambios)
            const scrollArrow = document.getElementById('scroll-arrow');
            if(scrollArrow) {
                scrollArrow.addEventListener('click', (e) => {
                    e.preventDefault();
                    const heroHeight = scrollArrow.closest('section').offsetHeight;
                    window.scrollTo({
                        top: heroHeight - 80, // Scroll justo debajo del Hero (80px de offset por el nav sticky)
                        behavior: 'smooth'
                    });
                });
            }

            // [CRO] Calculadora de Impacto (Sin cambios)
            const calcSubmit = document.getElementById('calc-submit');
            const calcResult = document.getElementById('calc-result');
            if(calcSubmit && calcResult) {
                calcSubmit.addEventListener('click', () => {
                    const vehicleMultiplier = parseFloat(document.getElementById('calc-vehicle').value);
                    const months = parseInt(document.getElementById('calc-months').value);
                    const citySelect = document.getElementById('calc-city');
                    const city = citySelect.options[citySelect.selectedIndex].text;
                    
                    // Simple hash para simular población (solo para demo)
                    let basePopulation = 50000;
                    if(city) {
                         basePopulation += city.length * 10000;
                    }

                    const weeklyImpact = Math.floor(basePopulation * vehicleMultiplier * 0.1);
                    const totalImpact = weeklyImpact * 4 * months; 

                    document.getElementById('calc-result-number').textContent = totalImpact.toLocaleString('es-AR');
                    document.getElementById('calc-result-city').textContent = `Personas vean tu marca en ${city || 'tu ciudad'} (en ${months} ${months > 1 ? 'meses' : 'mes'})`;
                    
                    calcResult.classList.remove('hidden');
                });
            }

            // [CRO] Micro-formulario "Gana Dinero" (Sin cambios)
            const showDriversCta = document.getElementById('show-drivers-cta');
            const saveDriverLeadCta = document.getElementById('save-driver-lead-cta');
            const driverMicroVehicle = document.getElementById('driver-micro-vehicle');
            const driverMicroEmail = document.getElementById('driver-micro-email');

            if (showDriversCta && saveDriverLeadCta && driverMicroVehicle && driverMicroEmail) {
                const toggleMicroFormButtons = () => {
                    const vehicle = driverMicroVehicle.value;
                    const email = driverMicroEmail.value;
                    if (vehicle && email && email.includes('@')) {
                        showDriversCta.classList.add('hidden');
                        saveDriverLeadCta.classList.remove('hidden');
                    } else {
                        showDriversCta.classList.remove('hidden');
                        saveDriverLeadCta.classList.add('hidden');
                    }
                };
                
                driverMicroVehicle.addEventListener('change', toggleMicroFormButtons);
                driverMicroEmail.addEventListener('input', toggleMicroFormButtons);

                // Botón "Únete a la Flota"
                showDriversCta.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchSection('drivers');
                });

                // Botón "Enviar" (Lead)
                saveDriverLeadCta.addEventListener('click', async (e) => {
                    e.preventDefault();
                    const lead = {
                        vehicleType: driverMicroVehicle.value,
                        email: driverMicroEmail.value,
                        source: 'micro-form-lead',
                        createdAt: new Date().toISOString()
                    };

                    try {
                        const docRef = await addDoc(collection(db, "driverLeads"), lead);
                        showSuccessModal("¡Recibido!", "Gracias por tu interés. Un asesor se contactará contigo pronto. ¡Mientras tanto, puedes completar el formulario completo para acelerar el proceso!");
                        // Opcional: llevar al formulario completo
                        setTimeout(() => {
                           switchSection('drivers');
                           document.getElementById('vehicle-type').value = lead.vehicleType;
                           document.getElementById('email').value = lead.email;
                        }, 500);

                    } catch (error) {
                        console.error("Error writing lead document: ", error);
                        showMessage("Error al guardar tus datos. Intenta de nuevo.", false);
                    }
                });
            }

            // [CRO] Botón "Registra tu Taller" (Sin cambios)
            const showGraphsCta = document.getElementById('show-graphs-cta');
            if(showGraphsCta) {
                showGraphsCta.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchSection('graphs');
                });
            }

            // --- Mobile Menu Toggle (Sin cambios) ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if(mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
            
            // --- Navigation Links (Sin cambios) ---
            const navLinks = [
                { id: 'register-driver-nav', section: 'drivers' },
                { id: 'register-graph-nav', section: 'graphs' },
                { id: 'register-driver-nav-mobile', section: 'drivers' },
                { id: 'register-graph-nav-mobile', section: 'graphs' },
                { id: 'footer-register-driver', section: 'drivers' },
                { id: 'footer-register-graph', section: 'graphs' }
            ];

            navLinks.forEach(link => {
                const element = document.getElementById(link.id);
                if (element) {
                    element.addEventListener('click', (e) => {
                        e.preventDefault();
                        switchSection(link.section);
                        if(mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden'); // Cerrar menú móvil
                        }
                    });
                }
            });

            backToHomeBtn.addEventListener('click', returnToInitialView);

            // --- Form Validation Helper (Sin cambios) ---
            const validateForm = (formElement, constraints = {}) => {
                let isValid = true;
                const fields = formElement.querySelectorAll('input[required], select[required], textarea[required]');
                
                fields.forEach(field => {
                    let fieldValid = true;
                    if (field.type === 'checkbox') {
                        fieldValid = field.checked;
                    } else {
                        fieldValid = field.value.trim() !== '';
                    }

                    // Constraint check
                    if (fieldValid && constraints[field.id]) {
                        fieldValid = constraints[field.id](field.value);
                    }
                    
                    if (!fieldValid) {
                        isValid = false;
                        field.classList.add('invalid-field');
                    } else {
                        field.classList.remove('invalid-field');
                    }
                });

                // Special validation for zones
                if (formElement.id === 'vehicle-data-form' && currentZones.length < 3) {
                    isValid = false;
                    zoneInput.classList.add('invalid-field');
                } else if (formElement.id === 'vehicle-data-form') {
                    zoneInput.classList.remove('invalid-field');
                }

                return isValid;
            };

            // --- Form 1: Personal Data (Conductores) (Sin cambios) ---
            const personalDataForm = document.getElementById('personal-data-form');
            personalDataForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!validateForm(personalDataForm)) {
                    showMessage("Por favor, completa todos los campos requeridos.", false);
                    return;
                }

                currentDriverData = {
                    fullName: document.getElementById('full-name').value,
                    province: document.getElementById('province').value,
                    city: document.getElementById('personal-city').value,
                    address: {
                        street: document.getElementById('address-street').value,
                        number: document.getElementById('address-number').value
                    },
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    vehicles: [], // Array to store vehicle data
                    createdAt: new Date().toISOString()
                };

                personalDataContainer.classList.add('hidden');
                vehicleDataContainer.classList.remove('hidden');
                
                // Pre-fill vehicle form if data exists from micro-form
                if(driverMicroVehicle.value) {
                    vehicleTypeSelect.value = driverMicroVehicle.value;
                    vehicleTypeSelect.dispatchEvent(new Event('change')); // Trigger change event
                }
            });

            // --- Form 2: Vehicle Data (Conductores) (Sin cambios) ---
            const vehicleDataForm = document.getElementById('vehicle-data-form');

            // Toggle vehicle-specific fields
            vehicleTypeSelect.addEventListener('change', () => {
                const type = vehicleTypeSelect.value;
                const isBici = (type === 'BICI');
                const isMoto = (type === 'MOTO');

                // Ocultar/Mostrar campos
                [brandContainer, modelContainer, yearContainer, licensePlateContainer].forEach(el => 
                    el.classList.toggle('hidden', isBici)
                );
                [backpackOptionContainer].forEach(el => 
                    el.classList.toggle('hidden', !isMoto && !isBici)
                );

                // Actualizar 'required'
                [brandInput, modelInput, yearInput, licensePlateInput].forEach(input => 
                    input.required = !isBici
                );
            });

            // Zone Pill Logic
            const updateAddZoneButton = () => {
                addZoneBtn.classList.toggle('hidden', zoneInput.value.trim() === '');
            };
            zoneInput.addEventListener('input', updateAddZoneButton);

            const addZone = () => {
                const zoneName = zoneInput.value.trim();
                if (zoneName && !currentZones.includes(zoneName)) {
                    currentZones.push(zoneName);
                    renderZonePills();
                    zoneInput.value = '';
                    updateAddZoneButton();
                    zoneInput.classList.remove('invalid-field');
                }
            };

            const removeZone = (zoneName) => {
                currentZones = currentZones.filter(z => z !== zoneName);
                renderZonePills();
            };

            const renderZonePills = () => {
                zonePillsContainer.innerHTML = '';
                currentZones.forEach(zone => {
                    const pill = document.createElement('div');
                    pill.className = 'flex items-center bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full';
                    pill.innerHTML = `
                        <span>${zone}</span>
                        <button type="button" class="ml-2 text-blue-600 hover:text-blue-800">&times;</button>
                    `;
                    pill.querySelector('button').addEventListener('click', () => removeZone(zone));
                    zonePillsContainer.appendChild(pill);
                });
            };

            addZoneBtn.addEventListener('click', addZone);
            zoneInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addZone();
                }
            });
            
            // Add Vehicle Button
            addVehicleBtn.addEventListener('click', () => {
                if (!saveVehicleData()) {
                    showMessage("Por favor, completa todos los campos del vehículo actual.", false);
                }
            });

            // Finish Vehicles Button
            finishVehiclesBtn.addEventListener('click', async () => {
                if (currentDriverData.vehicles.length === 0) {
                    if (!saveVehicleData()) {
                         showMessage("Debes agregar al menos un vehículo.", false);
                        return;
                    }
                }
                
                if (!currentDriverData || currentDriverData.vehicles.length === 0) {
                    showMessage("Error: No se han guardado vehículos.", false);
                    return;
                }

                try {
                    // Guardar el conductor completo
                    const driverRef = doc(collection(db, "drivers"));
                    await setDoc(driverRef, currentDriverData);
                    const newId = driverRef.id.substring(0, 8).toUpperCase();
                    
                    // Actualizar el documento con su propio ID (para referencia)
                    await setDoc(driverRef, { driverId: newId }, { merge: true });

                    generatedIdElement.textContent = newId;
                    driverIdDisplay.classList.remove('hidden');
                    
                    showSuccessModal(
                        "¡Registro Completo!",
                        `Tu ID de conductor es ${newId}. ¡Nos pondremos en contacto pronto con campañas para ti!`,
                        true // Indicar que debe redirigir al cerrar
                    );

                    // Reset state
                    resetDriverForm();

                } catch (error) {
                    console.error("Error writing driver document: ", error);
                    showMessage("Error al guardar tus datos. Intenta de nuevo.", false);
                }
            });
            
            // Scroll to Finish Button
            scrollToFinishBtn.addEventListener('click', () => {
                 finishVehiclesBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 finishVehiclesBtn.classList.add('highlight-finish-btn');
                 setTimeout(() => {
                     finishVehiclesBtn.classList.remove('highlight-finish-btn');
                 }, 3000);
            });

            // --- Driver Form Helper Functions (Sin cambios) ---
            function saveVehicleData() {
                const constraints = {
                    'year': (value) => value.length === 4 && parseInt(value) > 1980 && parseInt(value) <= new Date().getFullYear() + 1
                };

                if (!validateForm(vehicleDataForm, constraints)) {
                    return false;
                }

                const vehicleData = {
                    type: vehicleTypeSelect.value,
                    color: document.getElementById('color').value,
                    province: document.getElementById('vehicle-province').value,
                    city: document.getElementById('vehicle-city').value,
                    address: {
                        street: document.getElementById('address-street-vehicle').value,
                        number: document.getElementById('address-number-vehicle').value
                    },
                    zones: [...currentZones],
                    // Campos condicionales
                    brand: !brandInput.required ? null : brandInput.value,
                    model: !modelInput.required ? null : modelInput.value,
                    year: !yearInput.required ? null : yearInput.value,
                    licensePlate: !licensePlateInput.required ? null : licensePlateInput.value,
                    wantsBackpack: document.getElementById('wants-backpack').checked
                };

                currentDriverData.vehicles.push(vehicleData);
                updateAddedVehiclesList();
                resetVehicleForm();
                
                // Mostrar botón de "Terminé"
                scrollToFinishBtn.classList.remove('hidden');
                
                return true;
            }

            function resetVehicleForm() {
                vehicleDataForm.reset();
                currentZones = [];
                renderZonePills();
                vehicleTypeSelect.dispatchEvent(new Event('change')); // Reset conditional fields
                
                const vehicleCount = currentDriverData.vehicles.length;
                vehicleFormTitle.textContent = `${vehicleCount + 1}. Tu Vehículo: El Motor de tus Ganancias`;
            }

            function resetDriverForm() {
                personalDataForm.reset();
                resetVehicleForm();
                currentDriverData = null;
                addedVehiclesList.innerHTML = '';
                vehicleDataContainer.classList.add('hidden');
                personalDataContainer.classList.remove('hidden');
                driverIdDisplay.classList.add('hidden');
                scrollToFinishBtn.classList.add('hidden');
                
                // Resetear selects de ciudad
                document.getElementById('personal-city').innerHTML = '<option value="">Selecciona tu provincia primero</option>';
                document.getElementById('vehicle-city').innerHTML = '<option value="">Selecciona tu provincia primero</option>';
            }

            function updateAddedVehiclesList() {
                addedVehiclesList.innerHTML = '';
                if (currentDriverData.vehicles.length > 0) {
                    const listTitle = document.createElement('h4');
                    listTitle.className = 'text-lg font-semibold text-gray-700 mb-2';
                    listTitle.textContent = 'Vehículos Agregados:';
                    addedVehiclesList.appendChild(listTitle);

                    const list = document.createElement('ul');
                    list.className = 'list-disc list-inside space-y-1';
                    currentDriverData.vehicles.forEach((v, index) => {
                        const item = document.createElement('li');
                        item.className = 'text-gray-600';
                        item.textContent = `Vehículo ${index + 1}: ${v.type} - ${v.brand || ''} ${v.model || ''} (${v.color})`;
                        list.appendChild(item);
                    });
                    addedVehiclesList.appendChild(list);
                }
            }


            // --- Form 3: Gráficas (Sin cambios) ---
            const graphsForm = document.getElementById('graphs-form');
            const operatingHoursContainer = document.getElementById('operating-hours-container');
            const applyAllHoursCheckbox = document.getElementById('apply-all-hours');
            
            // Populate operating hours
            const days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];
            days.forEach(day => {
                const dayId = day.toLowerCase();
                const row = document.createElement('div');
                row.className = 'flex flex-col sm:flex-row items-center gap-2 sm:gap-4';
                row.innerHTML = `
                    <div class="flex items-center w-full sm:w-1/3">
                        <input id="check-${dayId}" name="check-${dayId}" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="check-${dayId}" class="ml-2 block text-gray-700 font-medium">${day}</label>
                    </div>
                    <div class="flex items-center gap-2 w-full sm:w-2/3">
                        <input type="time" id="time-from-${dayId}" name="time-from-${dayId}" class="w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" disabled>
                        <span class="text-gray-500">a</span>
                        <input type="time" id="time-to-${dayId}" name="time-to-${dayId}" class="w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" disabled>
                    </div>
                `;
                operatingHoursContainer.appendChild(row);

                // Add event listener to enable/disable time inputs
                row.querySelector(`#check-${dayId}`).addEventListener('change', (e) => {
                    const isChecked = e.target.checked;
                    row.querySelector(`#time-from-${dayId}`).disabled = !isChecked;
                    row.querySelector(`#time-to-${dayId}`).disabled = !isChecked;
                });
            });

            // "Apply all" logic
            applyAllHoursCheckbox.addEventListener('change', (e) => {
                const isChecked = e.target.checked;
                if (!isChecked) return;

                const firstDay = days[0].toLowerCase();
                const fromTime = document.getElementById(`time-from-${firstDay}`).value;
                const toTime = document.getElementById(`time-to-${firstDay}`).value;
                const isDayChecked = document.getElementById(`check-${firstDay}`).checked;

                if (!isDayChecked || !fromTime || !toTime) {
                    showMessage("Por favor, complete el horario del Lunes antes de aplicar a todos.", false);
                    applyAllHoursCheckbox.checked = false;
                    return;
                }

                days.slice(1).forEach(day => {
                    const dayId = day.toLowerCase();
                    document.getElementById(`check-${dayId}`).checked = true;
                    const fromInput = document.getElementById(`time-from-${dayId}`);
                    const toInput = document.getElementById(`time-to-${dayId}`);
                    fromInput.value = fromTime;
                    toInput.value = toTime;
                    fromInput.disabled = false;
                    toInput.disabled = false;
                });
            });

            // Submit Gráficas Form
            graphsForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const constraints = {
                    'service-commitment': (value) => document.getElementById('service-commitment').checked
                };

                if (!validateForm(graphsForm, constraints)) {
                    showMessage("Por favor, completa todos los campos requeridos, incluyendo el 'Compromiso de Servicio'.", false);
                    return;
                }

                // Collect Operating Hours
                const operatingHours = {};
                days.forEach(day => {
                    const dayId = day.toLowerCase();
                    if (document.getElementById(`check-${dayId}`).checked) {
                        operatingHours[day] = {
                            from: document.getElementById(`time-from-${dayId}`).value,
                            to: document.getElementById(`time-to-${dayId}`).value
                        };
                    }
                });

                // Collect Price Quotes
                const priceQuotes = {
                    autoCompleto: {
                        from: document.getElementById('price-from-auto-completo').value,
                        to: document.getElementById('price-to-auto-completo').value,
                        vinyl: graphsForm.elements['vinyl-auto-completo'].value,
                        time: graphsForm.elements['installation-time-auto-completo'].value,
                    },
                    capot: {
                        from: document.getElementById('price-from-capot').value,
                        to: document.getElementById('price-to-capot').value,
                        vinyl: graphsForm.elements['vinyl-capot'].value,
                        time: graphsForm.elements['installation-time-capot'].value,
                    },
                    puertas: {
                        from: document.getElementById('price-from-puertas').value,
                        to: document.getElementById('price-to-puertas').value,
                        vinyl: graphsForm.elements['vinyl-puertas'].value,
                        time: graphsForm.elements['installation-time-puertas'].value,
                    },
                    baul: {
                        from: document.getElementById('price-from-baul').value,
                        to: document.getElementById('price-to-baul').value,
                        vinyl: graphsForm.elements['vinyl-baul'].value,
                        time: graphsForm.elements['installation-time-baul'].value,
                    },
                    luneta: {
                        from: document.getElementById('price-from-luneta').value,
                        to: document.getElementById('price-to-luneta').value,
                        vinyl: graphsForm.elements['vinyl-luneta'].value,
                        time: graphsForm.elements['installation-time-luneta'].value,
                    },
                    moto: {
                        from: document.getElementById('price-from-moto').value,
                        to: document.getElementById('price-to-moto').value,
                        vinyl: graphsForm.elements['vinyl-moto'].value,
                        time: graphsForm.elements['installation-time-moto'].value,
                    },
                    bici: {
                        from: document.getElementById('price-from-bici').value,
                        to: document.getElementById('price-to-bici').value,
                        vinyl: graphsForm.elements['vinyl-bici'].value,
                        time: graphsForm.elements['installation-time-bici'].value,
                    },
                    mochila: {
                        from: document.getElementById('price-from-mochila').value,
                        to: document.getElementById('price-to-mochila').value,
                        vinyl: graphsForm.elements['vinyl-mochila'].value,
                        time: graphsForm.elements['installation-time-mochila'].value,
                    }
                };

                const graphData = {
                    graphName: document.getElementById('graph-name').value,
                    managerName: document.getElementById('manager-name').value,
                    phone: document.getElementById('graph-phone').value,
                    email: document.getElementById('graph-email').value,
                    province: document.getElementById('graphs-province').value,
                    city: document.getElementById('graph-location').value,
                    address: {
                        street: document.getElementById('graph-address-street').value,
                        number: document.getElementById('graph-address-number').value
                    },
                    weeklyCapacity: document.getElementById('weekly-capacity').value,
                    operatingHours: operatingHours,
                    priceQuotes: priceQuotes,
                    serviceCommitment: true,
                    createdAt: new Date().toISOString()
                };

                try {
                    const graphRef = doc(collection(db, "graphs"));
                    await setDoc(graphRef, graphData);
                    const newId = graphRef.id.substring(0, 8).toUpperCase();

                    // Actualizar el documento con su propio ID (para referencia)
                    await setDoc(graphRef, { graphId: newId }, { merge: true });
                    
                    generatedGraphIdElement.textContent = newId;
                    graphIdDisplay.classList.remove('hidden');
                    
                    showSuccessModal(
                        "¡Taller Registrado!",
                        `Tu ID de Socio Gráfico es ${newId}. ¡Pronto recibirás solicitudes de instalación!`,
                        true // Indicar que debe redirigir al cerrar
                    );
                    
                    graphsForm.reset();
                    // Resetear checkboxes y time inputs
                    days.forEach(day => {
                        const dayId = day.toLowerCase();
                        document.getElementById(`check-${dayId}`).checked = false;
                        document.getElementById(`time-from-${dayId}`).disabled = true;
                        document.getElementById(`time-to-${dayId}`).disabled = true;
                    });

                } catch (error) {
                    console.error("Error writing graph document: ", error);
                    showMessage("Error al guardar los datos de la gráfica. Intenta de nuevo.", false);
                }
            });

            // --- Inicializar todos los selects de Provincia/Ciudad ---
            setupProvinceCitySelects('calc-province', 'calc-city');
            setupProvinceCitySelects('province', 'personal-city');
            setupProvinceCitySelects('vehicle-province', 'vehicle-city');
            setupProvinceCitySelects('graphs-province', 'graph-location');

        });
    </script>
</body>
</html>

